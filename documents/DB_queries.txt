create table Users(User_id int not null primary key auto_increment  , name varchar(150) not null , email varchar(150) not null unique , password_hash varchar(255) not null , role Enum('ADMIN','STUDENT') not null, created_at timestamp default current_timestamp);



create table quizzes( quiz_id int not null primary key auto_increment , title varchar(255) not null , creator_id int, created_at timestamp default current_timestamp , foreign key(created_at) references Users(user_id)  on delete cascade on update cascade );

create table  quiz_attempts (attempt_id  int primary key auto_increment ,quiz_id int not null,student_id int not null,final_score int,total_questions int, created_at timestamp  default current_timestamp, foreign key (quiz_id) references quizzes(quiz_id) on delete cascade on update cascade , foreign key (student_id) references Users(user_id) on delete cascade on update cascade);


CREATE TABLE questions (question_id int primary key auto_increment,quiz_id int not null,question_text text not null,option_a varchar(500) not null,option_b varchar(500) not null,option_c varchar(500) not null,option_d varchar(500) not null,correct_option char(1) not null,created_at timestamp  default current_timestamp,foreign key (quiz_id) references quizzes(quiz_id) on delete cascade on update cascade);

